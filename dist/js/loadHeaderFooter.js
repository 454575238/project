"use strict";define(["jquery","cookie","template"],function(t,e,o){t.cookie.json=!0,t.ajax("/html/include/header.html").done(function(e){t(".header").html(e)}).done(function(){if(t.cookie("username")&&(t("#login").html('<a href="#">'+t.cookie("username")+"</a>"),t(".register").html('<a href="#">[退出]</a>'),t(".register").click(function(){t.cookie("username","",{expires:-1}),location.reload()})),0!==t(".searwrap").length){var e=t(".searwrap").offset().top;t(window).on("scroll",function(){t(document).scrollTop()>=e?(t(".searwrap").css({position:"fixed",top:0,zIndex:2}),t(".searwrap").css({background:"rgba(224,224,224,0.9)"})):(t(".searwrap").css({position:"relative",zIndex:1}),t(".searwrap").css({background:"rgba(224,224,224,1)"}))})}"none"===t(".catalist").css("display")&&(t(".catalogos").mouseenter(function(){t(".catalist").css("display","block")}),t(".catalogos").mouseleave(function(){t(".catalist").css("display","none")}),t(".catalist").hover(function(){t(".catalist").css("display","block")},function(){t(".catalist").css("display","none")})),setInterval(function(){var e=t.cookie("products")||[],n=o("shop-template",{products:e});t(".shopping-list").find("ul").html(n),t(".shopping-list").delegate(".delete","click",function(){!function(e,o){o.splice((n=e,i=o,function(t,e){for(var o=0;o<e.length;o++)if(t===e[o].id)return o;return-1}(t(n).parent().parent().find(".id").text(),i)),1),t.cookie("products",o,{expires:7,path:"/"}),t(e).parent().parent().remove();var n,i}(this,e)}),function(e){if(0!==e.length){for(var o=[],n=[],i=0;i<e.length;i++)o.push(e[i].amount),n.push(e[i].amount*e[i].price);var s=o.reduce(function(t,e){return t+e}),a=n.reduce(function(t,e){return t+e}).toFixed(2);t(".text .s1").find("b").text(s),t(".total-num").find("b").text(s),t(".text .s2").find("b").text(a),t(".total-price").text(a)}else t(".text .s1").find("b").text(0),t(".total-num").find("b").text(0),t(".text .s2").find("b").text("0.0"),t(".total-price").text("0.0"),t.cookie("products","",{expires:-1,path:"/"})}(e)},800)}).done(function(){t(".shopping-cart").hover(function(){t(".shopping-list").stop().fadeIn()},function(){t(".shopping-list").stop().fadeOut()})}),t(".footer").load("/html/include/footer.html")});