"use strict";require(["config"],function(){require(["template","load"],function(e){$.cookie.json=!0;var t=$.cookie("products")||[];console.log(t);var c=e("cart-template",{products:t});function n(e){t.splice(i(e),1),$.cookie("products",t,{expires:7,path:"/"}),$(e).parent().parent().remove(),r()}function i(e){return function(e,t){for(var c=0;c<t.length;c++)if(e===t[c].price)return c;return-1}($(e).parent().parent().find(".price").text(),t)}function r(){for(var e=0,t=0;t<$(".calc span").length;t++)e+=Number($(".calc span")[t].innerText);$(".calcall b b").text(e.toFixed(2))}$("#cart").html(c),$("#cart").delegate(".delete","click",function(){n(this)}),$("#cart").delegate(".add","click",function(){this.num=$(this).parent().find("input").val(),this.num++,$(this).parent().find("input").val(this.num),t[i(this)].amount++,this.parent=$(this).parent().parent();var e=parseFloat(this.parent.find(".price").text());this.parent.find(".calc span").text((e*this.num).toFixed(2)),$.cookie("products",t,{expires:7,path:"/"}),r()}),$("#cart").delegate(".reduce","click",function(){this.num=$(this).parent().find("input").val(),this.num--,console.log(t),$(this).parent().find("input").val(this.num),console.log(i(this)),t[i(this)].amount--,this.num<=0&&n(this),this.parent=$(this).parent().parent();var e=parseFloat(this.parent.find(".price").text());this.parent.find(".calc span").text((e*this.num).toFixed(2)),$.cookie("products",t,{expires:7,path:"/"}),r()}),$(".del-all").click(function(){console.log(this),$.cookie("products"," ",{expires:-1,path:"/"})}),$(".del-check").click(function(){for(var e=$("#cart").find(":checked").length,t=0;t<e;t++)n($("#cart").find(":checked")[t]);$("#cart").find(":checked").parent().parent().remove(),r()}),$(".checkall").click(function(){$(this).prop("checked")?($(".checkall").prop("checked",!0),$(".cart-alert").find(":checkbox").prop("checked",!0)):($(".checkall").prop("checked",!1),$("#cart").find(":checkbox").prop("checked",!1))}),$("#cart").delegate(":checkbox","click",function(){$("#cart").find(":checked").length===$("#cart").find(":checkbox").length?$(".checkall").prop("checked",!0):$(".checkall").prop("checked",!1)}),r()})});